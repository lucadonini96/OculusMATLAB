

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Adding data collection to your own scene &mdash; OculusUnityMatlab 0.0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="OculusUnityMatlab 0.0.1 documentation" href="../../index.html"/>
        <link rel="up" title="Getting Started: Unity" href="getting_started_unity.html"/>
        <link rel="next" title="Getting Started: MATLAB" href="../../matlab/getting_started/getting_started_matlab.html"/>
        <link rel="prev" title="Sample scene" href="sample_scene.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> OculusUnityMatlab
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../getting_started.html">Getting Started</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="getting_started_unity.html">Getting Started: Unity</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="import_packages.html">Importing the required packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="sample_scene.html">Sample scene</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Adding data collection to your own scene</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#save-data-to-file">Save data to file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#send-data-over-network">Send data over network</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../matlab/getting_started/getting_started_matlab.html">Getting Started: MATLAB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../downloads.html">Downloads</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/unity_reference.html">Unity Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">OculusUnityMatlab</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../getting_started.html">Getting Started</a> &raquo;</li>
      
          <li><a href="getting_started_unity.html">Getting Started: Unity</a> &raquo;</li>
      
    <li>Adding data collection to your own scene</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/unity/getting_started/custom_scene.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="adding-data-collection-to-your-own-scene">
<h1>Adding data collection to your own scene<a class="headerlink" href="#adding-data-collection-to-your-own-scene" title="Permalink to this headline">¶</a></h1>
<p>Now that you have familiarized yourself with the <a class="reference internal" href="sample_scene.html"><span class="doc">sample scene</span></a>, you can implement data collection into your own scene.</p>
<div class="section" id="save-data-to-file">
<h2>Save data to file<a class="headerlink" href="#save-data-to-file" title="Permalink to this headline">¶</a></h2>
<p>The section below describes how to save data to file. For output data format, please refer to <code class="docutils literal"><span class="pre">DOCUMENTATION</span></code>.</p>
<dl class="docutils">
<dt>Main Scripts (other experimental scripts are listed in <code class="docutils literal"><span class="pre">DOCUMENTATION</span></code>):</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#mainrecorder">MainRecorder</a></li>
<li><a class="reference internal" href="#recordaudiosources">RecordAudioSources</a></li>
<li><a class="reference internal" href="#recordinputjoystick">RecordInputJoystick</a></li>
<li><a class="reference internal" href="#recordgameinfo">RecordGameInfo</a></li>
<li><a class="reference internal" href="#audiowavrecorder">AudioWAVRecorder</a></li>
<li><a class="reference internal" href="#recordpositionattach">RecordPositionAttach</a></li>
</ul>
</dd>
</dl>
<div class="section" id="mainrecorder-gameobject">
<h3>MainRecorder GameObject<a class="headerlink" href="#mainrecorder-gameobject" title="Permalink to this headline">¶</a></h3>
<p>The first step is to create the <code class="docutils literal"><span class="pre">MainRecorder</span></code> GameObject. This can be conveniently done by dragging the <code class="docutils literal"><span class="pre">MainRecorder</span></code> prefab (blue box icon) from the <code class="docutils literal"><span class="pre">Recorder</span></code> assets folder into the Hierarchy.</p>
<img alt="../../_images/mainRecorder_prefab.png" src="../../_images/mainRecorder_prefab.png" />
<p>The MainRecorder comes with several script components attached.</p>
<img alt="../../_images/mainRecorder_inspector.png" src="../../_images/mainRecorder_inspector.png" />
<div class="section" id="mainrecorder">
<h4>MainRecorder<a class="headerlink" href="#mainrecorder" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The <code class="docutils literal"><span class="pre">MainRecorder</span></code> script handles the save directory. Its parameters are:</dt>
<dd><ul class="first last simple">
<li>Save Directory: The path of the directory where the data will be output. This can either be absolute or relative to the project root folder. Use <code class="docutils literal"><span class="pre">..</span></code> to navigate up in the directory tree.</li>
<li>Local Path: Specifies whether the path in <cite>Save Directory</cite> is local (relative to the project root folder) or absolute.</li>
<li>Additional Name: An additional string that will be added to the data output folders. For example, this can be set to the subject&#8217;s name or ID. In the most typical implementation, however, this value will be set and overwritten by MATLAB when the game is started.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="recordaudiosources">
<h4>RecordAudioSources<a class="headerlink" href="#recordaudiosources" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">RecordAudioSources</span></code> script creates two separate files:</p>
<ul class="simple">
<li>one file saving every time an audio clip starts playing, and</li>
<li>one file saving every time the volume of an audio clip perceived by the player changes (for example if the distance between the player and the source changes).</li>
</ul>
<p>The variable <code class="docutils literal"><span class="pre">LogNumberPlaying</span></code>, if set to true (checked), will write to console the number of audio sources playing every frame. This should only be used for debugging purposes, as it might slow down the simulation.</p>
</div>
<div class="section" id="recordinputjoystick">
<h4>RecordInputJoystick<a class="headerlink" href="#recordinputjoystick" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">RecordInputJoystick</span></code> script records input from the controller. It creates one file for the recorded axes and one for the recorded buttons.</p>
<p>The <code class="docutils literal"><span class="pre">Buttons</span> <span class="pre">To</span> <span class="pre">Record</span></code> menu contains the list of the buttons that should be recorded. By default, all buttons are recorded, but it is possible to remove any of them.</p>
<p>The <code class="docutils literal"><span class="pre">Axes</span> <span class="pre">To</span> <span class="pre">Record</span></code> menu contains the list of the axes that should be recorded. By default, all axes are recorded, but it is possible to remove any of them.</p>
<p>The <code class="docutils literal"><span class="pre">Save</span> <span class="pre">Axis</span> <span class="pre">Change</span> <span class="pre">Only</span></code> checkbox specifies whether axes values should be recorded only when they change or every frame.</p>
</div>
<div class="section" id="recordgameinfo">
<h4>RecordGameInfo<a class="headerlink" href="#recordgameinfo" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">RecordInputJoystick</span></code> script records general game information. Please refer to <code class="docutils literal"><span class="pre">DOCUMENTATION!</span></code> to learn how to implement recording of features.</p>
</div>
<div class="section" id="audiowavrecorder">
<h4>AudioWAVRecorder<a class="headerlink" href="#audiowavrecorder" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">AudioWAVRecorder</span></code> script records the audio perceived by the player (<code class="docutils literal"><span class="pre">AudioListener</span></code>).</p>
<p>If the <code class="docutils literal"><span class="pre">Record</span> <span class="pre">WAV</span></code> checkbox is enabled, the audio will be saved to a <code class="docutils literal"><span class="pre">.wav</span></code> file.</p>
<p>If the <code class="docutils literal"><span class="pre">Record</span> <span class="pre">TXT</span></code> checkbox is enabled, the audio data will be saved to a <code class="docutils literal"><span class="pre">.txt</span></code> file. Please refer to <code class="docutils literal"><span class="pre">DOCUMENTATION!!!</span></code> for more information.</p>
<p><strong>NOTE:</strong> This script has known issues and does not record <em>all</em> sounds being played. Please test the script on your project and see if it works for you.</p>
</div>
</div>
<div class="section" id="record-object-position-recordpositionattach">
<span id="recordpositionattach"></span><h3>Record Object Position: RecordPositionAttach<a class="headerlink" href="#record-object-position-recordpositionattach" title="Permalink to this headline">¶</a></h3>
<p>To record the position and rotation of a GameObject, add the <code class="docutils literal"><span class="pre">RecordPositionAttach</span></code> script (found in the <code class="docutils literal"><span class="pre">Recorder</span></code> assets folder) to its components.</p>
<img alt="../../_images/RecordPositionAttach.png" src="../../_images/RecordPositionAttach.png" />
<p>The <code class="docutils literal"><span class="pre">Save</span> <span class="pre">Object</span> <span class="pre">Scale</span></code> checkbox specifies whether the object&#8217;s scale should be recorded.</p>
<p>The <code class="docutils literal"><span class="pre">Only</span> <span class="pre">Save</span> <span class="pre">Change</span></code> checkbox specifies whether the position and rotation data should only be saved when any one of the (position or rotation) coordinates changes.</p>
<p>The <code class="docutils literal"><span class="pre">Record</span> <span class="pre">Local</span></code> checkbox specified whether the position and rotation of the object should <em>also</em> be recorded respective to its parent GameObject. For example, this might be required for <code class="docutils literal"><span class="pre">CenterEyeAnchor</span></code>, as local position and rotation give the player&#8217;s head position and rotation in the real world.</p>
</div>
</div>
<div class="section" id="send-data-over-network">
<h2>Send data over network<a class="headerlink" href="#send-data-over-network" title="Permalink to this headline">¶</a></h2>
<div class="section" id="viesys-gameobject">
<h3>VIESYS GameObject<a class="headerlink" href="#viesys-gameobject" title="Permalink to this headline">¶</a></h3>
<p>The first step is to create the <code class="docutils literal"><span class="pre">VIESYS</span></code> GameObject. This can be conveniently done by dragging the <code class="docutils literal"><span class="pre">VIESYS</span></code> prefab (blue box icon) from the <code class="docutils literal"><span class="pre">CommunicationWIF</span></code> assets folder into the Hierarchy.</p>
<img alt="../../_images/VIESYS_prefab.png" src="../../_images/VIESYS_prefab.png" />
<p>The VIESYS GameObject comes with various script components attached.</p>
<img alt="../../_images/VIESYS_inspector.png" src="../../_images/VIESYS_inspector.png" />
<p>The <code class="docutils literal"><span class="pre">WorldInterfaceWrapper</span></code> script is the backbone of the communication with MATLAB. The <code class="docutils literal"><span class="pre">Start</span> <span class="pre">Paused</span></code> checkbox specifies whether the game should start paused.</p>
<p>The <code class="docutils literal"><span class="pre">MATLABListenerComponent</span></code> script exposes some functionalities primarily intended for debugging. Refer to <code class="docutils literal"><span class="pre">DOCUMENTATION</span></code> for more information.</p>
<p>The <code class="docutils literal"><span class="pre">RemoveDuplicateSubscribedObjects</span></code> button removes duplicate subscribed objects attached to the same GameObject (as they are not required). This is only intended for debugging purposes.</p>
</div>
<div class="section" id="track-object-position-worldobject">
<h3>Track object position: WorldObject<a class="headerlink" href="#track-object-position-worldobject" title="Permalink to this headline">¶</a></h3>
<p>To track the position and rotation of a GameObject and send it to MATLAB, add the <code class="docutils literal"><span class="pre">WorldObject</span></code> script (found in the <code class="docutils literal"><span class="pre">CommunicationWIF</span></code> assets folder) to its components. If the object has been <strong>SUBSCRIBED!!! (link)</strong> from MATLAB, a message will be sent every time the position or rotation of the object has changed.</p>
<img alt="../../_images/WorldObject.png" src="../../_images/WorldObject.png" />
<p>Use the <code class="docutils literal"><span class="pre">Id</span></code> field to specify the name by which MATLAB will refer and subscribe to the GameObject that has this script attached.
Use the <code class="docutils literal"><span class="pre">Property1</span></code> field to send a generic message to MATLAB. The field will be cleared once the message has been sent. You will need to implement your own protocol to send messages through the <code class="docutils literal"><span class="pre">Property1</span></code> field and decode them in MATLAB.</p>
</div>
</div>
</div>


           </div>
          </div>
          <style>
.wrapper {
    text-align: center;
}
</style>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../matlab/getting_started/getting_started_matlab.html" class="btn btn-neutral float-right" title="Getting Started: MATLAB" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sample_scene.html" class="btn btn-neutral float-left" title="Sample scene" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
      <div class="wrapper">
			
				<a href="getting_started_unity.html" class="btn btn-neutral" title="" accesskey="p"><span class="fa fa-arrow-circle-up"></span> Parent</a>
			
	   </div>
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Luca Donini.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>